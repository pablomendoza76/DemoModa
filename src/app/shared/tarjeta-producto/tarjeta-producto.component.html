<div class="tarjetas-container" *ngIf="productos.length > 0">
  <div class="tarjeta" *ngFor="let producto of productos">
    <img [src]="producto.imagen_url" alt="{{ producto.nombre }}" />

    <!-- üõ†Ô∏è Botones de edici√≥n solo si es Sof√≠a -->
    <ng-container *ngIf="mostrarBotonEditar">
      <!-- ‚úèÔ∏è Bot√≥n editar -->
      <button class="editar-btn" (click)="abrirModalEdicion(producto)" title="Editar producto">‚úèÔ∏è</button>

      <!-- üóëÔ∏è Bot√≥n eliminar -->
      <button class="eliminar-btn" (click)="eliminarProducto(producto)" title="Eliminar producto">üóë</button>
    </ng-container>

    <h2>{{ producto.nombre }}</h2>
    <p class="descripcion">{{ producto.descripcion }}</p>
    <p class="precio">{{ producto.precio | currency }}</p>

    <!-- üõí Bot√≥n agregar al carrito -->
    <button (click)="abrirModal(producto)">Agregar Carrito</button>
  </div>
</div>

<div class="sin-productos" *ngIf="productos?.length === 0">
  No hay productos disponibles.
</div>

<!-- üõí Modal agregar al carrito -->
<div class="modal-carrito" *ngIf="mostrarModal">
  <div class="modal-contenido">
    <h3>Agregar al carrito</h3>
    <p>{{ productoSeleccionado?.nombre }}</p>

    <label>Talla:</label>
    <select [(ngModel)]="tallaSeleccionada">
      <option disabled selected value="">Selecciona una talla</option>
      <option *ngFor="let talla of productoSeleccionado?.tallas || ['S', 'M', 'L', 'XL']" [value]="talla">
        {{ talla }}
      </option>
    </select>

    <label>Cantidad:</label>
    <input type="number" min="1" [(ngModel)]="cantidadSeleccionada" />

    <div class="acciones">
      <button (click)="cerrarModal()">Cancelar</button>
      <button (click)="confirmarAgregar()">Agregar</button>
    </div>
  </div>
</div>

<!-- ‚úèÔ∏è Modal edici√≥n de producto -->
<div class="modal-carrito" *ngIf="mostrarModalEdicion">
  <div class="modal-contenido">
    <h3>Editar producto</h3>

    <label>Nombre:</label>
    <input type="text" [(ngModel)]="productoEditando.nombre" />

    <label>Descripci√≥n:</label>
    <textarea [(ngModel)]="productoEditando.descripcion"></textarea>

    <label>Precio:</label>
    <input type="number" min="0" [(ngModel)]="productoEditando.precio" />

    <label>Talla:</label>
    <input type="text" [(ngModel)]="productoEditando.talla" />

    <label>Color:</label>
    <input type="text" [(ngModel)]="productoEditando.color" />

    <label>Tipo de g√©nero:</label>
    <select [(ngModel)]="productoEditando.tipo_genero">
      <option value="hombre">Hombre</option>
      <option value="mujer">Mujer</option>
      <option value="unisex">Unisex</option>
    </select>


    <label>URL de imagen:</label>
    <input type="text" [(ngModel)]="productoEditando.imagen_url" />
    <img
      *ngIf="productoEditando.imagen_url"
      [src]="productoEditando.imagen_url"
      alt="Vista previa"
      class="preview-img"
    />

    <div class="acciones">
      <button (click)="cerrarModalEdicion()">Cancelar</button>
      <button (click)="guardarCambiosProducto()">Guardar</button>
    </div>
  </div>
</div>
